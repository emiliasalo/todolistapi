<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<meta name="description" content="">
<meta name="author" content="">

<title>Fiilissivu</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/api/resources/styles/tyyli.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="http://cdnjs.cloudflare.com/ajax/libs/1000hz-bootstrap-validator/0.11.5/validator.js"></script>

<!-- Bootstrap core CSS -->



<!-- Custom styles for this template -->


<script src=api/resources/js/jquery-1.12.0.min.js"></script>

<style>

h1 {
font-size: 40px;
}

.container-full {
  margin: 0 auto;
  width: 100%;
}

.fiilis{
-webkit-appearance: none;
background-color: Transparent;
border: none;
padding: 0;
margin: 0;
}

#tulokset{
height:70px;}

#tyhjatila{
height:100px;
}

#sininenboxi{
	background-color:rgba(0,0,255,1); /* Laatikon taustalle v�ri ja l�pin�kyvyys */
padding:15px;
border: 1px solid black; /* Reunuksen v�ri */
display: block;
}


table {
	
	border-collapse: separate;
	
	font-size: 12px;
	line-height: 24px;
	margin: 30px auto;
	text-align: center;
	width: 350px;
}

.profiili table {
	text-align: left;
	width:100%;
	border-style: solid;
	border-width: 1px;
}	

th {
	background: url(http://jackrugile.com/images/misc/noise-diagonal.png), linear-gradient(#777, #444);
	border-left: 1px solid #555;
	border-right: 1px solid #999;
	border-top: 1px solid #555;
	border-bottom: 1px solid #999;
	box-shadow: inset 0 1px 0 #999;
	color: #fff;
  font-weight: bold;
	padding: 10px 15px;
	position: relative;
	text-shadow: 0 1px 0 #000;	
}

td {

	padding: 10px 15px;
	position: relative;
	transition: all 300ms;
}

tr {
	background: url(http://jackrugile.com/images/misc/noise-diagonal.png);	
}

.text-right
{
    text-align: right !important;
}

.text-center
{
    text-align: center !important;
}

.text-left
{
    text-align: left !important;
}
.profiili{
	width:300px;

}

.button {
    background-color: #008CBA; 
    border: 2px solid;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    border-radius: 8px;
     -webkit-transition-duration: 0.1s; /* Safari */
    transition-duration: 0.1s;
}

.button:hover {
    background-color: #0099cc;
    color: white;
    border: 2px solid #008CBA;
}


.testinappula {
	
	
}	
	
	

</style>

</head>

<body>

<!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div id="navbar" class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li><a href="/">Etusivu</a></li>
						
					</ul>
					<!--Tämän kommentin alla ovat oikealla olevat linkit-->
					<ul class="nav navbar-nav navbar-right">
					<li><a>Sisäänkirjautuneena: <sec:authentication property="principal.username"/></a> </li>
					<li> <a href="../j_spring_security_logout"> Kirjaudu ulos</a></li>
				
					</ul>
				</div>
           </div> 
        <!-- /.container -->
    </nav>

<!-- Page Content -->
    <div class="container">
<br>
<br>
<sec:authorize access="hasRole('ROLE_ADMIN')">
<h1 class="text-center"><a href="admin/tools">Admin tools</a></h1>
</sec:authorize>


<br>
<h1>Profiili</h1>

<div class="profiili">
<table>
<tr>
<td>Käyttäjätunnus</td>
<td><sec:authentication property="principal.username"/></td>
</tr>
<tr>
<td>Fiilistestejä:</td>
<td><c:out value="${maara}"/></td>
</tr>
<tr>
<td>Viimeisin fiilistesti:</td>
<td><c:out value="${viimeisin}"/></td>
</tr>

</table>

</div> <!-- /.profiili -->

<button type="button" class="btn btn-primary btn-block" id="uusi">Luo uusi fiiliskysely</button>

<br>



<div class="row">
  <div class="col-md-6"><button class="btn btn-success btn-block testinappula"id="latausnappi">Hae fiilistestit</button></div>
  <div class="col-md-6"><button class="btn btn-success btn-block" id="tyhjennysnappi" >Piilota fiilistestit</button></div>
</div>
<br>



<div id="lista"></div>




			
</div>
		<!-- /container -->

<script>

//dokumentin latautuessa aktivoidaan tapahtumankuuntelijat
$(document).ready(function(){
	
	setCookie("kysykeksi", 0, 365);
	//tyhjennysnappia painettaessa
	$("#tyhjennysnappi").click(function() {
		$("#lista").empty();
	});

	
	
$("#latausnappi").click(function() {
	
	var pageurl = "/votes";

	//ladataan JSON-dataa palvelimelta
	$.getJSON(pageurl, function( data ) {
		var tableData = '<table><tr><th>Feeling1</th><th>Feeling2</th><th>Feeling3</th><th>Feeling4</th><th>Feeling5</th><th>Average</th><th>Votes</th><th>Lecture name</th><th>Date</th></tr>';
		$.each( data, function( key, val ) {
			//listaan uusi käyntikortti
			//nimi käyntikorttiin	
			tableData += '<tr><td>'+val.feeling1+'</td><td>'+val.feeling2+'</td><td>'+val.feeling3+'</td><td>'+val.feeling4+'</td><td>'+val.feeling5+'</td><td>'+val.average+'</td><td>'+val.votes+'</td><td>'+val.name+'</td><td>'+val.pvm+'</td></tr>';
		//	$("<h2/>").text(val.id + " " +val.fiilis1 + " " +val.fiilis2 + " " +val.fiilis3 + " " +val.fiilis4 + " " +val.fiilis5 + " " +val.keskiarvo + " " +val.aanet + " " +val.nimi + " " +val.pvm + " ").appendTo(feels);
			$('#lista').html(tableData);
		});
	}).error(function() { //palvelinyhteys aiheutti virheen
		$("<p class='Error'>Virhe: Palvelin ei palauta JSON-dataa. Tarkista tietokantayhteys.</p>").appendTo("#lista");
	});
	
});

$("#uusi").click(function() {
	setCookie("keskiarvokeksi", 0, 365);
	setCookie("aanetkeksi", 0, 365);
	setCookie("pisteet1keksi", 0, 365);
	setCookie("pisteet2keksi", 0, 365);
	setCookie("pisteet3keksi", 0, 365);
	setCookie("pisteet4keksi", 0, 365);
	setCookie("pisteet5keksi", 0, 365);
	setCookie("yhteispisteetkeksi", 0,
			365);
	setCookie("nimikeksi", 0, 365);
	window.location.replace("fiilis");
});

function setCookie(cname, cvalue, exdays) {
	var d = new Date();
	d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
	var expires = "expires=" + d.toUTCString();
	document.cookie = cname + "=" + cvalue + "; " + expires;
}

});

</script>

	<!-- Bootstrap core JavaScript
    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="api/resources/js/bootstrap.min.js"></script>
</body>
</html>
